<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ElektronikPlus</title>
<style>
:root{--primary:#00aa5b;--danger:#e60023;--bg:#f5f6f8;--text:#222;--muted:#777}
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,Arial}
body{background:var(--bg);color:var(--text)}
.header{background:#fff;padding:14px 20px;display:flex;align-items:center;gap:15px;box-shadow:0 2px 10px rgba(0,0,0,.08);position:sticky;top:0;z-index:100}
.logo{font-weight:800;font-size:20px}
.header input{flex:1;padding:12px;border-radius:10px;border:1px solid #ddd}
.container{max-width:1200px;margin:25px auto;padding:0 15px;display:grid;grid-template-columns:1fr 1fr;gap:40px}
.gallery{position:sticky;top:90px;overflow:hidden}
.main-img{width:100%;border-radius:18px;box-shadow:0 20px 45px rgba(0,0,0,.15);transition:0.5s;cursor:pointer}
.thumbs{display:flex;gap:10px;margin-top:14px;overflow-x:auto}
.thumbs img{width:70px;height:70px;object-fit:cover;border-radius:10px;cursor:pointer;opacity:.7;flex-shrink:0}
.thumbs img.active{border:2px solid var(--primary);opacity:1}
.details h1{font-size:30px;margin-bottom:8px}
.rating{color:var(--muted);margin-bottom:15px}
.discount-badge{display:inline-block;background:linear-gradient(135deg,#ff416c,#ff4b2b);color:#fff;padding:8px 14px;border-radius:20px;font-weight:700;margin-bottom:12px;box-shadow:0 6px 18px rgba(255,75,43,.4)}
#countdown{margin:10px 0;padding:10px;background:#ffefef;color:#e60023;font-weight:700;border-radius:12px;text-align:center;font-size:16px}
.price-box{background:#fff;padding:22px;border-radius:18px;margin-bottom:20px;box-shadow:0 10px 30px rgba(0,0,0,.1)}
.new-price{font-size:34px;font-weight:900;color:var(--danger)}
.old-price{text-decoration:line-through;color:#999;margin-left:10px;font-size:18px}
.promo{background:#fff8e1;padding:14px;border-radius:12px;margin-bottom:20px;font-size:14px}
.specs{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:20px}
.spec{background:#fff;padding:14px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.06)}
.trust{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:25px}
.trust div{background:#fff;padding:14px;border-radius:12px;text-align:center;font-size:14px}
.buy-box{background:#fff;padding:22px;border-radius:20px;box-shadow:0 15px 40px rgba(0,0,0,.18)}
.buy{width:100%;padding:16px;border:none;border-radius:14px;background:var(--primary);color:#fff;font-size:18px;cursor:pointer;margin-top:10px}
.reviews{max-width:1200px;margin:40px auto;padding:0 15px}
.review{background:#fff;padding:18px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.08);margin-bottom:16px}
.review-header{display:flex;justify-content:space-between;margin-bottom:6px}
.review-name{font-weight:700}
.review-stars{color:#f5a623}
.review-text{font-size:14px;color:#444}

/* Popup */
#buyPopup{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:10000;justify-content:center;align-items:center}
#buyPopup .popup-content{background:#fff;border-radius:20px;width:90%;max-width:400px;padding:20px;position:relative}
#buyPopup .popup-content input,#buyPopup .popup-content textarea{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:1px solid #ccc}
#buyPopup .popup-content button{width:100%;padding:12px;background:var(--primary);color:#fff;border:none;border-radius:8px;margin-top:10px;cursor:pointer}
#buyPopup .closePopup{position:absolute;top:10px;right:15px;font-size:22px;cursor:pointer}
#payNow{display:inline-block;width:100%;padding:16px;background:linear-gradient(135deg,#ff416c,#ff4b2b);color:#fff;font-size:18px;font-weight:700;text-align:center;border-radius:12px;text-decoration:none;margin-top:20px;box-shadow:0 8px 25px rgba(255,65,108,.4)}
@media(max-width:900px){.container{grid-template-columns:1fr}.gallery{position:static}}
</style>
</head>
<body>

<script src="product-data.js"></script>

<div class="header">
  <div class="logo">ElektronikPlus</div>
  <input placeholder="Cari produk...">
  üõí
</div>

<div class="container">
  <div class="gallery">
    <img id="mainImg" class="main-img">
    <div class="thumbs" id="thumbs"></div>
  </div>

  <div class="details">
    <h1 id="name">Product Name</h1>
    <div class="rating" id="rating"></div>
    <div class="discount-badge" id="discountBadge"></div>
    <!-- Countdown timer -->
    <div id="countdown">Penawaran berakhir dalam: <span id="timer">60:00</span></div>
    
    <div class="price-box">
      <span class="new-price" id="price"></span>
      <span class="old-price" id="oldPrice"></span>
    </div>
    <div class="promo" id="promo"></div>
    <div class="specs" id="specs"></div>
    <div class="trust">
      <div>üöö Pengiriman Cepat</div>
      <div>üõ° Garansi Aman</div>
      <div>‚Ü© Retur Mudah</div>
    </div>
    <div class="buy-box">
      <div id="delivery"></div>
      <button class="buy">Beli Sekarang</button>
    </div>
  </div>
</div>

<div class="reviews">
  <h2>Ulasan Pembeli</h2><br>
  <div class="review"><div class="review-header"><div class="review-name">Andi Pratama</div><div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div></div><div class="review-text">Produk sesuai deskripsi, kualitas bagus dan pengiriman cepat. Sangat puas.</div></div>
  <div class="review"><div class="review-header"><div class="review-name">Siti Rahma</div><div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div></div><div class="review-text">Barang berfungsi dengan baik, packing rapi. Recomended untuk beli.</div></div>
  <div class="review"><div class="review-header"><div class="review-name">Budi Santoso</div><div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div></div><div class="review-text">Harga sesuai kualitas, mudah digunakan dan sangat membantu.</div></div>
</div>

<!-- Buy Now Popup -->
<div id="buyPopup">
  <div class="popup-content">
    <span class="closePopup">&times;</span>

    <div id="step1">
      <h2>Alamat Pengiriman</h2>
      <input id="shipName" placeholder="Nama Penerima">
      <input id="shipPhone" placeholder="No. Telepon">
      <textarea id="shipAddress" placeholder="Alamat Lengkap"></textarea>
      <button id="nextStep">Next</button>
    </div>

    <div id="step2" style="display:none;text-align:center;">
      <h2>Pembayaran</h2>
      <p>Silakan klik tombol di bawah untuk melanjutkan pembayaran.</p>
      <a id="payNow" href="https://nowpayments.io/payment/?iid=5491528633" target="_blank">Pay Now</a>
    </div>
  </div>
</div>

<script>
// === Product Rendering from product-data.js ===
let product = defaultProduct;

const nameEl = document.getElementById("name");
const ratingEl = document.getElementById("rating");
const priceEl = document.getElementById("price");
const oldPriceEl = document.getElementById("oldPrice");
const promoEl = document.getElementById("promo");
const discountEl = document.getElementById("discountBadge");
const specsEl = document.getElementById("specs");
const mainImg = document.getElementById("mainImg");
const thumbs = document.getElementById("thumbs");
const deliveryEl = document.getElementById("delivery");

function renderProduct(p){
  nameEl.textContent = p.name;
  ratingEl.textContent = `‚≠ê ${p.rating} (${p.reviews}) ‚Ä¢ ${p.sold} Terjual`;
  priceEl.textContent = p.currency + p.price;
  oldPriceEl.textContent = p.currency + p.oldPrice;
  promoEl.innerHTML = p.promo.join("<br>");
  discountEl.textContent = `HEMAT ${Math.round(100 - (p.price/p.oldPrice*100))}%`;
  specsEl.innerHTML = p.specs.map(s=>`<div class="spec">${s}</div>`).join("");
  deliveryEl.textContent = p.delivery;

  let currentIndex=0;
  mainImg.src=p.images[currentIndex];
  thumbs.innerHTML="";
  p.images.forEach((img,i)=>{
    const t=document.createElement("img");
    t.src=img;
    if(i===0) t.classList.add("active");
    t.onclick=()=>{currentIndex=i; updateSlider();}
    thumbs.appendChild(t);
  });

  function updateSlider(){
    mainImg.src=p.images[currentIndex];
    document.querySelectorAll(".thumbs img").forEach((t,i)=>t.classList.toggle("active", i===currentIndex));
  }

  setInterval(()=>{
    currentIndex = (currentIndex + 1) % p.images.length;
    updateSlider();
  },3000);
}

renderProduct(product);

// === Countdown Timer (1 hour) ===
let countdownDuration = 60 * 60; // 1 hour in seconds
const timerEl = document.getElementById("timer");

function updateCountdown() {
  let minutes = Math.floor(countdownDuration / 60);
  let seconds = countdownDuration % 60;
  timerEl.textContent = `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
  if(countdownDuration > 0){
    countdownDuration--;
  } else {
    clearInterval(countdownInterval);
    timerEl.textContent = "Waktu Habis!";
    document.querySelector(".buy").disabled = true;
    document.querySelector(".buy").style.background = "#ccc";
  }
}

const countdownInterval = setInterval(updateCountdown, 1000);
updateCountdown();

// === Popup Logic ===
const popup=document.getElementById("buyPopup");
const step1=document.getElementById("step1");
const step2=document.getElementById("step2");
const closePopup=document.querySelector(".closePopup");

document.querySelector(".buy").addEventListener("click", ()=>{
  popup.style.display="flex";
  const saved=JSON.parse(localStorage.getItem("clientInfo"))||{};
  document.getElementById("shipName").value=saved.name||"";
  document.getElementById("shipPhone").value=saved.phone||"";
  document.getElementById("shipAddress").value=saved.address||"";
  step1.style.display="block";
  step2.style.display="none";
});

closePopup.addEventListener("click", ()=>{popup.style.display="none";});

// Validate shipping before next
document.getElementById("nextStep").addEventListener("click", ()=>{
  const nameInput=document.getElementById("shipName");
  const phoneInput=document.getElementById("shipPhone");
  const addressInput=document.getElementById("shipAddress");
  let valid=true;
  [nameInput, phoneInput, addressInput].forEach(i=>i.style.border="1px solid #ccc");
  if(!nameInput.value.trim()){nameInput.style.border="2px solid red"; valid=false;}
  if(!phoneInput.value.trim()){phoneInput.style.border="2px solid red"; valid=false;}
  if(!addressInput.value.trim()){addressInput.style.border="2px solid red"; valid=false;}
  if(!valid){alert("Mohon lengkapi semua kolom!"); return;}
  localStorage.setItem("clientInfo", JSON.stringify({
    name:nameInput.value.trim(),
    phone:phoneInput.value.trim(),
    address:addressInput.value.trim()
  }));
  step1.style.display="none";
  step2.style.display="block";
});
</script>

</body>
</html>
